# Настройка деплоя на Render.com

## Переменные окружения

Для корректной работы приложения на Render.com добавьте следующие переменные окружения в разделе "Environment Variables":

```
PORT=10000
MONGO_URI=mongodb://mongodb:27017/bizon-furniture
JWT_SECRET=bizon-furniture-jwt-secret
NODE_ENV=production
```

## Настройка конфигурации

1. **Start Command**: `node emergency-server.js`
2. **Node Version**: 14.0.0 или выше
3. **Build Command**: `npm install`

## Важные изменения в коде

Были внесены следующие изменения для решения проблем с деплоем:

1. **index.js**: 
   - Сервер запускается до подключения к MongoDB
   - Добавлена обработка ошибок MongoDB
   - Увеличены таймауты подключения

2. **emergency-server.js**:
   - Создан аварийный сервер без зависимости от MongoDB
   - Используется как запасной вариант при проблемах с БД

3. **package.json**:
   - Обновлен для использования аварийного сервера
   - Добавлены необходимые зависимости

## Рекомендации

1. Используйте внешнюю MongoDB (MongoDB Atlas) для продакшена
2. Убедитесь, что IP адрес Render.com добавлен в список разрешенных в MongoDB Atlas
3. В случае проблем с подключением к MongoDB, сервер будет работать в ограниченном режиме

## Проверка работоспособности

После деплоя проверьте, что сервер работает, открыв URL вашего приложения в браузере. 
Вы должны увидеть сообщение: `{"message":"Сервер BIZON работает!"}`